(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(3305)}])},3305:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return E}});var n=t(5893),r=t(7414),i=t(8818),l=t(6801),c=t(1604);let[o,a,u]=(0,l.W)(),d=[.1,.2,.25,.3,.333,.4,.5,.6,.7,.75,.8,.9,1,1.2,1.666,2,3,4,5,6,10],h=c.z.object({prob:c.z.number().min(.1,{message:"確率は0.1以上必須"}),attempts:c.z.number().min(10,{message:"回数は10以上必須"})});var x=t(1150),p=t(6137),j=t(264),b=t(7294);let m=()=>{let e=a(),s=s=>{e.setFieldValue("prob",s)};return(0,b.useEffect)(()=>{e.isValid()},[e.values.prob]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.o,{label:"当たりの出現率",...e.getInputProps("prob"),rightSection:"%"}),(0,n.jsx)(p.Z,{spacing:2,children:d.map((e,t)=>(0,n.jsx)(j.z,{sx:e=>({padding:e.spacing.xs}),variant:"outline",onClick:()=>{s(e)},children:e},t))})]})},v=()=>{let e=a(),s=s=>{let t=e.values.attempts;Number.isInteger(t)?e.setFieldValue("attempts",t+s):e.setFieldValue("attempts",s)};return(0,b.useEffect)(()=>{e.isValid()},[e.values.attempts]),(0,n.jsxs)(r.x,{children:[(0,n.jsx)(x.o,{label:"ガチャを試す回数",...e.getInputProps("attempts")}),(0,n.jsxs)(p.Z,{children:[(0,n.jsxs)(j.z.Group,{children:[(0,n.jsx)(j.z,{variant:"outline",onClick:()=>{s(10)},children:"+10"}),(0,n.jsx)(j.z,{variant:"outline",color:"red",onClick:()=>{s(-10)},children:"-10"})]}),(0,n.jsxs)(j.z.Group,{children:[(0,n.jsx)(j.z,{variant:"outline",onClick:()=>{s(100)},children:"+100"}),(0,n.jsx)(j.z,{variant:"outline",color:"red",onClick:()=>{s(-100)},children:"-100"})]})]})]})};var f=t(6925),g=t(5117),w=t(5078),P=t(7119);let z=(e,s,t,n)=>(0,P.BjO)(e,s)*Math.pow(t,s)*Math.pow(n,e-s);class _{anySuccessProb(){return 1-this.allFailProb()}allFailProb(){return Math.pow(this.inverseProb(),this.count)}SuccessProbByHit(e){return z(this.count,e,this.prob,this.inverseProb())}SuccessProbByHits(e){let s=1;for(let t=0;t<e;t++)s-=z(this.count,t,this.prob,this.inverseProb());return s}anySuccessCount(e){return Math.ceil(Math.log(1-1*e/100)/Math.log(1-this.prob))}inverseProb(){return 1-this.prob}constructor(e){var s,t;this.prob=(null!==(s=e.prob)&&void 0!==s?s:0)/100,this.count=null!==(t=e.count)&&void 0!==t?t:0}}var C=t(3953);let F=e=>"".concat((0,C.v5)(100*e,2),"%"),k=()=>{let e=a(),s=new _({prob:e.values.prob,count:e.values.attempts});return e.isValid()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(f.a,{spacing:4,mb:"sm",icon:(0,n.jsx)(n.Fragment,{}),center:!0,children:[(0,n.jsx)(f.a.Item,{children:(0,n.jsxs)(g.x,{fz:"xl",children:["1回以上当たる確率は",(0,n.jsx)(g.x,{component:"span",fw:"bold",c:"red",children:F(s.anySuccessProb())})]})}),(0,n.jsx)(f.a.Item,{mb:"sm",children:(0,n.jsxs)(g.x,{fz:"xl",children:["全て外れる確率は",(0,n.jsx)(g.x,{component:"span",fw:"bold",children:F(s.allFailProb())})]})}),[50,70,95].map((e,t)=>(0,n.jsxs)(f.a.Item,{children:[e,"%の人は",(0,n.jsx)(g.x,{component:"span",fw:"bold",children:s.anySuccessCount(e)}),"回やれば1回は当たる"]},t)),(0,n.jsxs)(f.a.Item,{children:["1%の人は",(0,n.jsx)(g.x,{component:"span",fw:"bold",c:"red",children:s.anySuccessCount(99)}),"回やっても全て外れる\uD83E\uDD2A"]})]}),(0,n.jsxs)(w.i,{striped:!0,withBorder:!0,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"出現回数"}),(0,n.jsx)("th",{children:"確率"})]})}),(0,n.jsx)("tbody",{children:[0,1,2,3,4,5].map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e}),(0,n.jsx)("td",{children:F(s.SuccessProbByHit(e))})]},t))})]})]}):(0,n.jsx)(n.Fragment,{})};var y=t(892);let S=()=>{let e=u({validateInputOnChange:!0,initialValues:{prob:1,attempts:30},validate:(0,y.F)(h)});return(0,n.jsx)(o,{form:e,children:(0,n.jsxs)(r.x,{maw:400,mx:"auto",children:[(0,n.jsx)(m,{}),(0,n.jsx)(i.T,{h:"md"}),(0,n.jsx)(v,{}),(0,n.jsx)(i.T,{h:"md"}),(0,n.jsx)(k,{})]})})};var E=()=>(0,n.jsx)(S,{})},5042:function(){}},function(e){e.O(0,[329,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);