(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(t,e,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3305)}])},3305:function(t,e,s){"use strict";s.r(e),s.d(e,{default:function(){return k}});var r=s(5893),n=s(7414),i=s(6801),l=s(1604);let[a,c,o]=(0,i.W)(),u=[.1,.2,.25,.3,.333,.4,.5,.6,.7,.75,.8,.9,1,1.2,1.666,2,3,4,5,6,10],h=l.z.object({prob:l.z.number().min(.1,{message:"確率は0.1以上必須"}),attempts:l.z.number().min(10,{message:"回数は10以上必須"})});var d=s(1150),p=s(6137),x=s(264),j=s(7294);let b=()=>{let t=c(),e=e=>{t.setFieldValue("prob",e)};return(0,j.useEffect)(()=>{t.isValid()},[t.values.prob]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.o,{label:"当たりの出現率",...t.getInputProps("prob"),rightSection:"%"}),(0,r.jsx)(p.Z,{spacing:2,children:u.map((t,s)=>(0,r.jsx)(x.z,{sx:t=>({padding:t.spacing.xs}),variant:"outline",onClick:()=>{e(t)},children:t},s))})]})},m=()=>{let t=c(),e=e=>{let s=t.values.attempts;Number.isInteger(s)?t.setFieldValue("attempts",s+e):t.setFieldValue("attempts",e)};return(0,j.useEffect)(()=>{t.isValid()},[t.values.attempts]),(0,r.jsxs)(n.x,{mt:"xs",mb:"xs",children:[(0,r.jsx)(d.o,{label:"ガチャを試す回数",...t.getInputProps("attempts"),rightSection:"回"}),(0,r.jsxs)(p.Z,{children:[(0,r.jsxs)(x.z.Group,{children:[(0,r.jsx)(x.z,{variant:"outline",onClick:()=>{e(10)},children:"+10"}),(0,r.jsx)(x.z,{variant:"outline",color:"red",onClick:()=>{e(-10)},children:"-10"})]}),(0,r.jsxs)(x.z.Group,{children:[(0,r.jsx)(x.z,{variant:"outline",onClick:()=>{e(100)},children:"+100"}),(0,r.jsx)(x.z,{variant:"outline",color:"red",onClick:()=>{e(-100)},children:"-100"})]})]})]})};var v=s(6925),g=s(5078),f=s(7119);let P=(t,e,s,r)=>(0,f.BjO)(t,e)*Math.pow(s,e)*Math.pow(r,t-e);class w{anySuccessProb(){return 1-this.allFailProb()}allFailProb(){return Math.pow(this.inverseProb(),this.count)}SuccessProbByHit(t){return P(this.count,t,this.prob,this.inverseProb())}SuccessProbByHits(t){let e=1;for(let s=0;s<t;s++)e-=P(this.count,s,this.prob,this.inverseProb());return e}anySuccessCount(t){return Math.ceil(Math.log(1-1*t/100)/Math.log(1-this.prob))}inverseProb(){return 1-this.prob}constructor(t){var e,s;this.prob=(null!==(e=t.prob)&&void 0!==e?e:0)/100,this.count=null!==(s=t.count)&&void 0!==s?s:0}}var _=s(3953);let C=t=>"".concat((0,_.v5)(100*t,2),"%"),z=()=>{let t=c(),e=new w({prob:t.values.prob,count:t.values.attempts});return t.isValid()?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.a,{spacing:3,children:[(0,r.jsxs)(v.a.Item,{children:["1回以上当たる確率は",C(e.anySuccessProb())]}),(0,r.jsxs)(v.a.Item,{mb:"sm",children:["全て外れる確率は ",C(e.allFailProb())]}),[50,70,95].map((t,s)=>(0,r.jsxs)(v.a.Item,{children:[t,"%の人は ",e.anySuccessCount(t),"回やれば、1回は当たる"]},s)),(0,r.jsxs)(v.a.Item,{children:["1%の人は ",e.anySuccessCount(99),"回やっても全て外れる\uD83E\uDD2A"]})]}),(0,r.jsxs)(g.i,{striped:!0,withBorder:!0,children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"出現回数"}),(0,r.jsx)("th",{children:"確率"})]})}),(0,r.jsx)("tbody",{children:[0,1,2,3,4,5].map((t,s)=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:C(e.SuccessProbByHit(t))})]},s))})]})]}):(0,r.jsx)(r.Fragment,{})};var F=s(892);let S=()=>{let t=o({validateInputOnChange:!0,initialValues:{prob:1,attempts:30},validate:(0,F.F)(h)});return(0,r.jsx)(a,{form:t,children:(0,r.jsxs)(n.x,{maw:400,mx:"auto",children:[(0,r.jsx)(b,{}),(0,r.jsx)(m,{}),(0,r.jsx)(z,{})]})})};var k=()=>(0,r.jsx)(S,{})},5042:function(){}},function(t){t.O(0,[4,774,888,179],function(){return t(t.s=8312)}),_N_E=t.O()}]);