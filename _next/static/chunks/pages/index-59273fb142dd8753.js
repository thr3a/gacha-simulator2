(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3305)}])},3305:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return T}});var n=s(5893),r=s(7414),i=s(8818),a=s(6801),l=s(1604);let[o,c,u]=(0,a.W)(),h=[.1,.2,.25,.3,.333,.4,.5,.6,.7,.75,.8,.9,1,1.2,1.666,2,3,4,5,6,10],d=l.z.object({prob:l.z.number().min(.1,{message:"確率は0.1以上必須"}),attempts:l.z.number().min(10,{message:"回数は10以上必須"})});var x=s(61),p=s(6137),b=s(7841),j=s(7294);let m=()=>{let e=c(),t=t=>{e.setFieldValue("prob",t)};return(0,j.useEffect)(()=>{e.isValid()},[e.values.prob]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(x.o,{label:"当たりの出現率",...e.getInputProps("prob"),rightSection:"%"}),(0,n.jsx)(p.Z,{spacing:2,children:h.map((e,s)=>(0,n.jsx)(b.z,{sx:e=>({padding:e.spacing.xs}),variant:"outline",onClick:()=>{t(e)},children:e},s))})]})};var v=s(9830);let f=()=>{let e=[];for(let t=1;t<=20;t++)e.push((10*t).toString());return e},g=()=>{let e=c();return(0,n.jsx)(r.x,{children:(0,n.jsx)(v.Ph,{label:"ガチャを試す回数",data:f(),value:e.values.attempts.toString(),onChange:t=>{null!==t&&e.setFieldValue("attempts",Number(t))}})})};var w=s(8949),P=s(5117),S=s(5078),_=s(7119);let y=(e,t,s,n)=>(0,_.BjO)(e,t)*Math.pow(s,t)*Math.pow(n,e-t);class F{anySuccessProb(){return 1-this.allFailProb()}allFailProb(){return Math.pow(this.inverseProb(),this.count)}SuccessProbByHit(e){return y(this.count,e,this.prob,this.inverseProb())}SuccessProbByHits(e){let t=1;for(let s=0;s<e;s++)t-=y(this.count,s,this.prob,this.inverseProb());return t}anySuccessCount(e){return Math.ceil(Math.log(1-1*e/100)/Math.log(1-this.prob))}inverseProb(){return 1-this.prob}constructor(e){var t,s;this.prob=(null!==(t=e.prob)&&void 0!==t?t:0)/100,this.count=null!==(s=e.count)&&void 0!==s?s:0}}var C=s(3953),E=s(5152),k=s.n(E);let z=k()(async()=>await Promise.all([s.e(313),s.e(158)]).then(s.bind(s,1158)),{loadableGenerated:{webpack:()=>[1158]},ssr:!1}),B=e=>"".concat((0,C.v5)(100*e,2),"%"),I=()=>{let e=c(),t=new F({prob:e.values.prob,count:e.values.attempts});return e.isValid()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(w.a,{spacing:4,mb:"sm",icon:(0,n.jsx)(n.Fragment,{}),center:!0,children:[(0,n.jsx)(w.a.Item,{children:(0,n.jsxs)(P.x,{fz:"xl",children:["1回以上当たる確率は",(0,n.jsx)(P.x,{component:"span",fw:"bold",c:"red",children:B(t.anySuccessProb())})]})}),(0,n.jsx)(w.a.Item,{mb:"sm",children:(0,n.jsxs)(P.x,{fz:"xl",children:["全て外れる確率は",(0,n.jsx)(P.x,{component:"span",fw:"bold",children:B(t.allFailProb())})]})}),[50,70,95].map((e,s)=>(0,n.jsxs)(w.a.Item,{children:[e,"%の人は",(0,n.jsx)(P.x,{component:"span",fw:"bold",children:t.anySuccessCount(e)}),"回やれば1回は当たる"]},s)),(0,n.jsxs)(w.a.Item,{children:["1%の人は",(0,n.jsx)(P.x,{component:"span",fw:"bold",c:"red",children:t.anySuccessCount(99)}),"回やっても全て外れる\uD83E\uDD2A"]})]}),(0,n.jsx)(i.T,{h:"md"}),(0,n.jsx)(z,{data:[0,1,2,3,4,5].map(e=>({count:e,prob:(0,C.v5)(100*t.SuccessProbByHit(e),2)}))}),(0,n.jsxs)(S.i,{striped:!0,withBorder:!0,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"当たる回数"}),(0,n.jsx)("th",{children:"確率"})]})}),(0,n.jsx)("tbody",{children:[0,1,2,3,4,5].map((e,s)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e}),(0,n.jsx)("td",{children:B(t.SuccessProbByHit(e))})]},s))})]})]}):(0,n.jsx)(n.Fragment,{})};var M=s(892);let N=()=>{let e=u({validateInputOnChange:!0,initialValues:{prob:1,attempts:30},validate:(0,M.F)(d)});return(0,n.jsx)(o,{form:e,children:(0,n.jsxs)(r.x,{maw:400,mx:"auto",children:[(0,n.jsx)(m,{}),(0,n.jsx)(i.T,{h:"md"}),(0,n.jsx)(g,{}),(0,n.jsx)(i.T,{h:"md"}),(0,n.jsx)(I,{})]})})};var T=()=>(0,n.jsx)(N,{})},5042:function(){}},function(e){e.O(0,[37,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);