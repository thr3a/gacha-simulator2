(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(3305)}])},3305:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var n=s(5893),r=s(6801),i=s(1604);let[l,a,c]=(0,r.W)(),o=[.1,.2,.25,.3,.333,.4,.5,.6,.7,.75,.8,.9,1,1.2,1.666,2,3,4,5,6,10],u=i.z.object({prob:i.z.number().min(.1,{message:"確率は0.1以上必須"}),attempts:i.z.number().min(10,{message:"回数は10以上必須"})});var d=s(7414),h=s(9830);let x=()=>{let e=[];for(let t=1;t<=20;t++)e.push((10*t).toString());return e},b=()=>{let e=a();return(0,n.jsx)(d.x,{children:(0,n.jsx)(h.Ph,{label:"ガチャを試す回数",data:x(),value:e.values.attempts.toString(),onChange:t=>{null!==t&&e.setFieldValue("attempts",Number(t))}})})};var p=s(61),j=s(6137),m=s(7841),v=s(7294);let f=()=>{let e=a(),t=t=>{e.setFieldValue("prob",t)};return(0,v.useEffect)(()=>{e.isValid()},[e]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.o,{label:"当たりの出現率",...e.getInputProps("prob"),rightSection:"%"}),(0,n.jsx)(j.Z,{spacing:2,children:o.map((e,s)=>(0,n.jsx)(m.z,{sx:e=>({padding:e.spacing.xs}),variant:"outline",onClick:()=>{t(e)},children:e},s))})]})};var P=s(7119);let g=(e,t,s,n)=>(0,P.BjO)(e,t)*s**t*n**(e-t);class w{anySuccessProb(){return 1-this.allFailProb()}allFailProb(){return this.inverseProb()**this.count}SuccessProbByHit(e){return g(this.count,e,this.prob,this.inverseProb())}SuccessProbByHits(e){let t=1;for(let s=0;s<e;s++)t-=g(this.count,s,this.prob,this.inverseProb());return t}anySuccessCount(e){return Math.ceil(Math.log(1-1*e/100)/Math.log(1-this.prob))}inverseProb(){return 1-this.prob}constructor(e){var t,s;this.prob=(null!==(t=e.prob)&&void 0!==t?t:0)/100,this.count=null!==(s=e.count)&&void 0!==s?s:0}}var S=s(8949),_=s(5117),y=s(8818),F=s(5078),C=s(3953),E=s(5152),k=s.n(E);let z=k()(async()=>await Promise.all([s.e(313),s.e(158)]).then(s.bind(s,1158)),{loadableGenerated:{webpack:()=>[1158]},ssr:!1}),B=e=>"".concat((0,C.v5)(100*e,2),"%"),I=()=>{let e=a(),t=new w({prob:e.values.prob,count:e.values.attempts});return e.isValid()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(S.a,{spacing:4,mb:"sm",center:!0,children:[(0,n.jsx)(S.a.Item,{children:(0,n.jsxs)(_.x,{fz:"xl",children:["1回以上当たる確率は",(0,n.jsx)(_.x,{component:"span",fw:"bold",c:"red",children:B(t.anySuccessProb())})]})}),(0,n.jsx)(S.a.Item,{mb:"sm",children:(0,n.jsxs)(_.x,{fz:"xl",children:["全て外れる確率は",(0,n.jsx)(_.x,{component:"span",fw:"bold",children:B(t.allFailProb())})]})}),[50,70,95].map((e,s)=>(0,n.jsxs)(S.a.Item,{children:[e,"%の人は",(0,n.jsx)(_.x,{component:"span",fw:"bold",children:t.anySuccessCount(e)}),"回やれば1回は当たる"]},s)),(0,n.jsxs)(S.a.Item,{children:["1%の人は",(0,n.jsx)(_.x,{component:"span",fw:"bold",c:"red",children:t.anySuccessCount(99)}),"回やっても全て外れる\uD83E\uDD2A"]})]}),(0,n.jsx)(y.T,{h:"md"}),(0,n.jsx)(z,{data:[0,1,2,3,4,5].map(e=>({count:e,prob:(0,C.v5)(100*t.SuccessProbByHit(e),2)}))}),(0,n.jsxs)(F.i,{striped:!0,withBorder:!0,children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"当たる回数"}),(0,n.jsx)("th",{children:"確率"})]})}),(0,n.jsx)("tbody",{children:[0,1,2,3,4,5].map((e,s)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e}),(0,n.jsx)("td",{children:B(t.SuccessProbByHit(e))})]},s))})]})]}):(0,n.jsx)(n.Fragment,{})};var N=s(892);let T=()=>{let e=c({validateInputOnChange:!0,initialValues:{prob:1,attempts:30},validate:(0,N.F)(u)});return(0,n.jsx)(l,{form:e,children:(0,n.jsxs)(d.x,{maw:400,mx:"auto",children:[(0,n.jsx)(f,{}),(0,n.jsx)(y.T,{h:"md"}),(0,n.jsx)(b,{}),(0,n.jsx)(y.T,{h:"md"}),(0,n.jsx)(I,{})]})})};var V=()=>(0,n.jsx)(T,{})},5042:function(){}},function(e){e.O(0,[37,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);